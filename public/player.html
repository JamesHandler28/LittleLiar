<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>littleliar - Player</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- The animated background is intentionally removed from this page for clarity -->

    <div id="role-guide-overlay" class="overlay" style="display: none;">
        <div class="overlay-content role-guide-content">
            <h3>How to Play littleliar</h3>
            
            <h4>The Goal</h4>
            <p><strong>Friends Team:</strong> Your goal is to keep the VIP alive by disarming all the traps OR by correctly guessing the secret plot in the Final Accusation.</p>
            <p><strong>Conspiracy Team:</strong> Your goal is to secretly sabotage missions to damage the VIP, allowing your Ringleader to execute the secret plot and win instantly.</p>
            
            <hr>

            <h4>The Roles</h4>
            <p><strong>Friend:</strong> You are on the good team. Use your Supply Cards to help successfully disarm traps. Pay close attention to how people vote and what clues they declare to find who you can trust.</p>
            <p><strong>Conspiracy Ringleader:</strong> You are the leader of the bad team. You know the secret plot (a specific weapon and location). Your goal is to get chosen as the Bodyguard for a mission to that *exact* location. If you succeed, you win!</p>
            <p><strong>Conspiracy Accomplice:</strong> You are on the bad team with the Ringleader. You know who the Ringleader is and what the plot is. Help them by sabotaging trap disarms with mismatched cards and by voting in ways that help them achieve their goal.</p>

            <hr>

            <h4>Game Flow: A Round</h4>
            <ol style="text-align: left; margin: auto; max-width: 450px;">
                <li><b>The Scout Proposes:</b> One player is chosen as the Scout. They propose a team of players, a location to visit, and a Bodyguard for the mission (who must be on the team).</li>
                <li><b>The Vote:</b> Everyone votes YES or NO on the proposal. Be careful! Three failed votes in a row will damage the VIP.</li>
                <li><b>The Mission:</b> If the vote passes, the chosen team goes to the location. All other players move to Gather Supplies and draw new cards.</li>
                <li><b>The Trap:</b> The team members at the location must disarm a trap. They secretly contribute Supply Cards. To succeed, the total value of the cards must meet or beat the trap's value.</li>
                <li><b>The Clue:</b> If the trap is disarmed, the Bodyguard secretly sees two clues (one weapon, one location) and must then publicly declare what they "found". They can lie or tell the truth! This is how the Friends gather information.</li>
                <li><b>New Round:</b> A new player becomes the Scout and the cycle repeats.</li>
            </ol>

            <button id="close-role-guide-btn">Close</button>
        </div>
    </div>

    <div id="pause-overlay" class="overlay" style="display: none;">
        <div class="overlay-content">
            <h2 id="pause-message">Game Paused</h2>
            <p>Waiting for players to reconnect...</p>
        </div>
    </div>

    <div id="game-over-overlay" class="overlay" style="display: none;">
        <div class="overlay-content">
            <h2 id="win-title"></h2>
            <p id="win-reason"></p>
            <div id="reveal-container">
                <h4>The Secrets Are Revealed!</h4>
                <p><strong>The Plot:</strong> <span id="plot-reveal"></span></p>
                <ul id="player-roles-list"></ul>
            </div>
        </div>
    </div>

    <div id="final-accusation-overlay" class="overlay" style="display: none;">
        <div class="overlay-content">
            <h2>Final Accusation</h2>
            <h3 id="accusation-timer">5:00</h3>
            <p>Discuss with your team and cast your vote for each category.</p>
            <div id="final-vote-container">
                <div class="vote-category">
                    <h4>Suspect</h4>
                    <div id="suspect-vote-list"></div>
                </div>
                <div class="vote-category">
                    <h4>Weapon</h4>
                    <div id="weapon-vote-list"></div>
                </div>
                <div class="vote-category">
                    <h4>Location</h4>
                    <div id="location-vote-list"></div>
                </div>
            </div>
            <button id="submit-final-vote-btn">Submit Final Vote</button>
        </div>
    </div>

    <div id="tie-breaker-overlay" class="overlay" style="display: none;">
        <div class="overlay-content">
            <h2>Resolve the Tie!</h2>
            <p>As the Scout, you must break the tie for the following categories.</p>
            <div id="tie-breaker-container"></div>
            <button id="submit-tie-breaker-btn">Submit Final Decision</button>
        </div>
    </div>

    <div id="player-join-view" class="container">
        <h3>Join a Game</h3>
        <input type="text" id="player-name-input" placeholder="Enter Your Name">
        <input type="text" id="room-code-input" placeholder="Enter Room Code" maxlength="6">
        <button id="join-game-btn">Join</button>
    </div>

    <div id="player-wait-view" style="display: none;" class="container">
        <h2>Welcome, <span id="player-name-display"></span>!</h2>
        <p>Waiting for the host to start the game...</p>
        <div id="character-selection-container">
            <!-- Character options will be dynamically inserted here -->
        </div>
    </div>

    <div id="player-game-view" style="display: none;" class="container">
        <button id="role-guide-btn" style="display: none;">Show Roles</button>
        <div id="player-info">
            <h3>Your Role: <span id="role-display">???</span></h3>
            <h4>Character: <span id="character-display">???</span></h4>
        </div>
        <div id="conspiracy-plot-info" style="display: none;">
            <h4>Secret Plot:</h4>
            <p id="plot-details"></p>
        </div>
        <div id="conspiracy-team-info" style="display: none;">
            <h4>Your Team:</h4>
            <ul id="conspiracy-team-list"></ul>
        </div>
        <div id="player-hand"></div>
        <div id="collected-clues" style="display: none;">
            <h4>Clues You've Collected:</h4>
            <ul id="clue-list"></ul>
        </div>
        <div id="action-area"></div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="player.js"></script>
</body>
</html>